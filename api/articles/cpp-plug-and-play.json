{"title":"C++ 光速入手","uid":"470ce2862e053ac4b49e4787bc3083c4","slug":"cpp-plug-and-play","date":"2022-10-12T14:56:55.000Z","updated":"2022-10-14T15:16:46.334Z","comments":true,"path":"api/articles/cpp-plug-and-play.json","keywords":null,"cover":null,"content":"<p>光速入门 C++ ，方便算法竞赛使用… 好吧… 其实是老师让的，给学校后来有志于参加算法竞赛的同志们留下前人的经验…</p>\n<p>该帖中所有的内容均于 <code>clang 15.0.0</code> ( llvm <code>7c7702b318503e27ebc3c795a827aa85135cc130</code> ) 下编译通过</p>\n<p>( 虽然人很菜就是了 )</p>\n<p>( 又菜又爱玩.JPG )</p>\n<hr>\n<h2 id=\"Hello-World\"><a href=\"#Hello-World\" class=\"headerlink\" title=\"Hello World!\"></a>Hello World!</h2><blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>“欢迎来到世界”</p></blockquote>\n<pre class=\"line-numbers language-C++\" data-language=\"C++\"><code class=\"language-C++\">#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n&#123;\n    cout&lt;&lt;&quot;Hello World!&quot;&lt;&lt;endl;\n    return 0;\n&#125;</code></pre>\n<p>听说这是所有程序员的第一个程序？</p>\n<h2 id=\"C-语法基础\"><a href=\"#C-语法基础\" class=\"headerlink\" title=\"C++ 语法基础\"></a>C++ 语法基础</h2><h3 id=\"预处理\"><a href=\"#预处理\" class=\"headerlink\" title=\"预处理\"></a>预处理</h3><p>预处理是编译的一个过程，通常由编译器的预处理器完成，C++ 中，传递给预处理器的指令通常用 <code>#</code> 标记出来</p>\n<p>最常见的预处理指令应该就是 <code>#include</code> 了，它的作用是告诉预处理器去包含一个文件的内容，这样你就可以使用里面预先定义好的内容，比如</p>\n<pre class=\"line-numbers language-C++\" data-language=\"C++\"><code class=\"language-C++\">#include &lt;iostream&gt;</code></pre>\n<p>这样便是包含了 <code>iostream</code> 这个库文件，它会在预处理时被包含入你的程序文件，对于竞赛中常用的头文件会有</p>\n<pre class=\"line-numbers language-C++\" data-language=\"C++\"><code class=\"language-C++\">#include &lt;iostream&gt;\n#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\n#include &lt;algorithm&gt;\n#include &lt;stack&gt;\n#include &lt;queue&gt;\n#include &lt;vector&gt;\n#include &lt;set&gt;\n#include &lt;map&gt;</code></pre>\n\n<p>以及一些竞赛中会允许你使用所谓的万能头文件，它包含了整个 C++ 标准库</p>\n<pre class=\"line-numbers language-C++\" data-language=\"C++\"><code class=\"language-C++\">#include &lt;bits&#x2F;stdc++.h&gt;</code></pre>\n<p>另一个比较常用的预处理指令是 <code>#define</code>，它的作用是定义一个宏</p>\n<pre class=\"line-numbers language-C++\" data-language=\"C++\"><code class=\"language-C++\">#define MATH_PI 3.14</code></pre>\n\n<p>这样我们就定义了一个叫做 <code>MATH_PI</code> 的宏，它指代的意思就是 <code>3.14</code>，在预处理阶段，代码里所有的 <code>MATH_PI</code> 都会被替换成 <code>3.14</code></p>\n<div class=\"custom-quote warning\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 8V13\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 15.99V16.01\"></path>\n</svg>\n</span>\n<p class=\"custom-quote-title\">不要用 <code>#define</code> 指令来替代常量的定义</p>\n<p>有的同学学会 <code>#define</code> 之后就总想用它来替代常量的定义，这实际上是非常不好的，因为 <code>#define</code> 它是一个预处理指令，也就是说你定义的这个宏最终不会被导出到符号表之中，对调试过程会造成很大的麻烦，调试工具或者编译器只会告诉你是什么值不正确，而不知道是哪个符号出了问题，特别是在实际的工程项目之中，常量的定义跟具体的代码实现通常放在不同的文件中，调试就更加困难了，所以请尽量避免使用 <code>#define</code> 定义常量，而应该使用 <code>const</code> 关键字来修饰一个常量</p>\n</div>\n<p>它也可以定义一个符号，这个通常与条件编译一起使用</p>\n<pre class=\"line-numbers language-C++\" data-language=\"C++\"><code class=\"language-C++\">#define LOCAL_BUILD_TYPE_DEBUG\n\n#ifdef LOCAL_BUILD_TYPE_DEBUG\n&#x2F;&#x2F; do someting to help debug\n#endif\n&#x2F;&#x2F; other function code block</code></pre>\n\n<p>也就是说，当你定义 <code>LOCAL_BUILD_TYPE_DEBUG</code> 这个符号时，<code>#ifdef</code> 和 <code>endif</code> 之间的语句就会被编译，如果没有这个符号，那其中的内容就会被预处理器去掉，对于调试用途来说，这样很方便</p>\n<h3 id=\"基本结构\"><a href=\"#基本结构\" class=\"headerlink\" title=\"基本结构\"></a>基本结构</h3><p>每一个 C++ 程序都以 <code>main()</code> 函数作为该程序的入口点，每个文件有且只能有一个 <code>main()</code> 函数</p>\n<h3 id=\"标准-IO-操作\"><a href=\"#标准-IO-操作\" class=\"headerlink\" title=\"标准 IO 操作\"></a>标准 IO 操作</h3><p>C++ 中，我们使用 <code>cout</code> 向标准输出 (stdout) 上输出信息，使用 <code>cin</code> 从标准输入 (stdin) 上输入信息，它们都被定义于 <code>iostream</code> 库中，下面的小例子实现了整数 echo 功能</p>\n<pre class=\"line-numbers language-C++\" data-language=\"C++\"><code class=\"language-C++\">#include &lt;iostream&gt;\n\nusing namespace std;\n\nint main()\n&#123;\n    int a, b;\n    cin&gt;&gt;a&gt;&gt;b;\n    cout&lt;&lt;a&lt;&lt;b&lt;&lt;endl;\n    return 0;\n&#125;</code></pre>\n<p>使用非常方便</p>\n<p>当然我们也可以使用 C 标准库中的输入输出函数，也就是 <code>printf</code> 和 <code>scanf</code> ，定义于 <code>cstdio</code> 头文件中，下面的小程序实现了与上面的程序相同的功能</p>\n<pre class=\"line-numbers language-C++\" data-language=\"C++\"><code class=\"language-C++\">#include &lt;cstdio&gt;\n\nint main()\n&#123;\n    int a, b;\n    scanf(&quot;%d%d&quot;, &amp;a, &amp;b);\n    printf(&quot;%d%d&quot;, a, b);\n    return 0;\n&#125;</code></pre>\n\n<p>上面的代码块中，<code>printf</code> 与 <code>scanf</code> 接收几个参数，双引号内的内容是输出的内容以及格式化输出的内容，后面是要输入&#x2F;输出的操作对象</p>\n<p>你也许会注意到 <code>scanf</code> 中接受的变量参数带 <code>&amp;</code> 而 <code>printf</code> 中不带，这一点会在以后讲解，现在就先记住这个特性，它与函数参数的传递方式和指针有关</p>\n<div class=\"custom-quote warning\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 8V13\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12 15.99V16.01\"></path>\n</svg>\n</span>\n<p class=\"custom-quote-title\">关于 <code>cin/cout</code> 与 <code>scanf/printf</code> 的效率问题</p>\n<p>相比于  <code>scanf/printf</code> ， <code>cin/cout</code> 的执行速度要快，如果某个题目有巨量的数据需要输入，直接使用 <code>cin/cout</code> 可能会 TLE，这时候在确保算法及优化正确的情况下，可以考虑换用 <code>scanf/printf</code> 或者对 <code>cin/cout</code> 进行优化</p>\n</div>\n<div class=\"custom-quote tip\">\n<span class=\"custom-quote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M20.86 14.13C20 14.7 19.56 15.74 19.77 16.76C20.13 18.55 18.55 20.13 16.76 19.77C15.74 19.57 14.7 20 14.13 20.86C13.12 22.38 10.89 22.38 9.88 20.86C9.3 20 8.26 19.56 7.24 19.77C5.45 20.13 3.87 18.55 4.23 16.76C4.43 15.74 4 14.7 3.14 14.13C1.62 13.12 1.62 10.89 3.14 9.88C4 9.3 4.44 8.26 4.23 7.24C3.87 5.45 5.45 3.87 7.24 4.23C8.26 4.44 9.3 4 9.87 3.14C10.88 1.62 13.11 1.62 14.12 3.14C14.7 4 15.74 4.44 16.76 4.23C18.55 3.87 20.13 5.45 19.77 7.24C19.56 8.26 20 9.3 20.86 9.87C22.38 10.88 22.38 13.12 20.86 14.13Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M12.01 15C12.01 14.5 12.01 14.5 12.01 14.5C12.04 13.75 13 13.46 14.04 12.2C14.41 11.74 14.69 11.41 14.86 10.85C15.15 9.95 14.92 9.18 14.86 9.02C14.8 8.79 14.52 8 13.72 7.46C13.06 7.02 12.42 7 12.14 7C11.9 7 11.36 7 10.78 7.3C10.28 7.56 9.98 7.9 9.83 8.1C9.24 8.82 9.06 9.63 9 10.06\"></path>\n<path stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M11.99 18H12.01\"></path>\n</svg></span>\n<p class=\"custom-quote-title\">关于 <code>iostream</code> 的优化方法</p>\n<p>这部分暂时不看也没关系，第一次读的读者可以跳过阅读下一小节<br>C++ 为保证对 C 的兼容性做了许多努力，其中就包括 <code>iostream</code> 与 <code>cstdio</code> 的兼容</p>\n<pre class=\"line-numbers language-C++\" data-language=\"C++\"><code class=\"language-C++\">std::ios::sync_with_stdio(false)</code></pre>\n\n<p>这一项默认是打开的，目的是绑定 <code>iostream</code> 与 <code>cstdio</code> 使用的 <code>stdin/stdout</code> 流，以此保证 <code>printf/scanf</code> 与 <code>cout/cin</code> 同时使用时不会导致混乱，这也是 <code>iostream</code> 慢的主要原因<br>需要注意的是，关闭同步之后 <code>scanf</code> 就不能与 <code>cout</code> 一同使用，<code>printf</code> 也不能与 <code>cin</code> 一起使用，但是 <code>scanf</code> 可以与 <code>cin</code> 一同使用，<code>printf</code> 可以与 <code>cout</code> 一同使用</p>\n</div>\n<p>至于其中的 <code>%d</code> 和 <code>\\n</code> ，分别是格式化输出字符和转义字符，下面列出常用的格式化输出字符</p>\n<table>\n<thead>\n<tr>\n<th align=\"right\">格式化字符</th>\n<th align=\"left\">作用</th>\n</tr>\n</thead>\n<tbody><tr>\n<td align=\"right\">%c</td>\n<td align=\"left\">输入&#x2F;输出单个字符</td>\n</tr>\n<tr>\n<td align=\"right\">%s</td>\n<td align=\"left\">输入&#x2F;输出一个字符串</td>\n</tr>\n<tr>\n<td align=\"right\">%d</td>\n<td align=\"left\">转换有符号整数为十进制表示</td>\n</tr>\n<tr>\n<td align=\"right\">%nd</td>\n<td align=\"left\">转换 n 位有符号整数为十进制表示，输入&#x2F;输出位数少于 n 则补前导零，超出则丢弃</td>\n</tr>\n<tr>\n<td align=\"right\">%lf</td>\n<td align=\"left\">转换</td>\n</tr>\n<tr>\n<td align=\"right\">%</td>\n<td align=\"left\"></td>\n</tr>\n</tbody></table>\n","feature":true,"text":"光速入门 C++ ，方便算法竞赛使用… 好吧… 其实是老师让的，给学校后来有志于参加算法竞赛的同志们留下前人的经验… 该帖中所有的内容均于 clang 15.0.0 ( llvm 7c7702b318503e27ebc3c795a827aa85135cc130 ) 下编译通过 (...","link":"","photos":[],"count_time":{"symbolsCount":"3k","symbolsTime":"3 mins."},"categories":[],"tags":[{"name":"CSP/ACM","slug":"CSP-ACM","count":1,"path":"api/tags/CSP-ACM.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#Hello-World\"><span class=\"toc-text\">Hello World!</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#C-%E8%AF%AD%E6%B3%95%E5%9F%BA%E7%A1%80\"><span class=\"toc-text\">C++ 语法基础</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E9%A2%84%E5%A4%84%E7%90%86\"><span class=\"toc-text\">预处理</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E5%9F%BA%E6%9C%AC%E7%BB%93%E6%9E%84\"><span class=\"toc-text\">基本结构</span></a></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E6%A0%87%E5%87%86-IO-%E6%93%8D%E4%BD%9C\"><span class=\"toc-text\">标准 IO 操作</span></a></li></ol></li></ol>","author":{"name":"Crepuscular Han","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/64133324","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{},"next_post":{"title":"Happy birthday to my motherland -- China!","uid":"e1f04371a63c516375ead1ec5f4186b6","slug":"2022-Chinese-national-day","date":"2022-09-30T16:00:00.000Z","updated":"2022-10-12T12:12:50.414Z","comments":true,"path":"api/articles/2022-Chinese-national-day.json","keywords":null,"cover":"http://x0.ifengimg.com/res/2019/855A7E7B6D0AF80A577513EBE5DD64C969FFE6A9_size269_w600_h338.jpeg","text":" 人民有信仰 国家有力量 民族有希望 夏商周，春秋，战国，秦汉 | Xia, Shang, Zhou; Chunqiu; Zhanguo; Qin, Han. 三国，两晋，南北朝 | the Three dynasity; West Jin and East Jin; South...","link":"","photos":[],"count_time":{"symbolsCount":930,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"Android","slug":"Android","count":1,"path":"api/tags/Android.json"}],"author":{"name":"Crepuscular Han","slug":"blog-author","avatar":"https://avatars.githubusercontent.com/u/64133324","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}